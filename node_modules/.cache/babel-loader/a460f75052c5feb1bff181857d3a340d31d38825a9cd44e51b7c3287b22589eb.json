{"ast":null,"code":"import { createElementVNode as _createElementVNode, createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-37dfd6fc\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"login-container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"title-container\"\n}, [/*#__PURE__*/_createElementVNode(\"h3\", {\n  class: \"title\"\n}, \"微校园\")], -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_form, {\n    class: \"login-form\",\n    model: $setup.form,\n    rules: $setup.rules,\n    ref: \"formRef\"\n  }, {\n    default: _withCtx(() => [_hoisted_2, _createVNode(_component_el_form_item, {\n      prop: \"username\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, {\n        size: 20,\n        class: \"svg-container\"\n      }, {\n        default: _withCtx(() => [_createVNode($setup[\"Edit\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_input, {\n        modelValue: $setup.form.userName,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.form.userName = $event),\n        placeholder: \"请输入用户名\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      prop: \"password\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_icon, {\n        size: 20,\n        class: \"svg-container\"\n      }, {\n        default: _withCtx(() => [_createVNode($setup[\"Edit\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_input, {\n        modelValue: $setup.form.password,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.form.password = $event),\n        type: \"password\",\n        placeholder: \"请输入密码\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        class: \"login-button\",\n        onClick: $setup.handleLogin\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"登录\")]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\", \"rules\"])]);\n}","map":{"version":3,"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_createVNode","_component_el_form","model","$setup","form","rules","ref","_hoisted_2","_component_el_form_item","prop","_component_el_icon","size","_component_el_input","userName","$event","placeholder","password","type","_component_el_button","onClick","handleLogin"],"sources":["D:\\vue_project\\survey-vue\\src\\views\\login\\index.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-container\">\r\n      <el-form class=\"login-form\"\r\n               :model=\"form\" :rules=\"rules\" ref=\"formRef\">\r\n          <div class=\"title-container\">\r\n              <h3 class=\"title\">微校园</h3>\r\n          </div>\r\n          <el-form-item prop=\"username\">\r\n              <el-icon :size=\"20\" class=\"svg-container\"><Edit/></el-icon>\r\n              <el-input v-model=\"form.userName\" placeholder=\"请输入用户名\"/>\r\n          </el-form-item>\r\n          <el-form-item prop=\"password\">\r\n              <el-icon :size=\"20\" class=\"svg-container\"><Edit/></el-icon>\r\n              <el-input v-model=\"form.password\" type=\"password\" placeholder=\"请输入密码\"/>\r\n          </el-form-item>\r\n          <el-form-item>\r\n              <el-button type=\"primary\" class=\"login-button\" @click=\"handleLogin\">登录</el-button>\r\n          </el-form-item>\r\n      </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref} from 'vue';\r\nimport {Edit} from '@element-plus/icons-vue';\r\nimport axiosUtil from '@/util/axios'\r\nimport {ElMessage} from 'element-plus';\r\nimport router from \"@/router\";\r\n\r\nconst form = ref({\r\n    userName: '',\r\n    password: ''\r\n});\r\nconst rules = ref({\r\n    userName: [\r\n        {required: true, message: '请输入用户名', trigger: 'blur'}\r\n    ],\r\n    password: [\r\n        {required: true, message: '请输入密码', trigger: 'blur'}\r\n    ],\r\n});\r\nconst formRef = ref(null);\r\nconst handleLogin = () => {\r\n    formRef.value.validate(async (valid) => {\r\n        if (valid) {\r\n            try {\r\n                // 向后端发起登录请求\r\n                let result = await axiosUtil.post(\"/api/userinfo/login\", form.value);\r\n                let data = result.data;\r\n                if (data.success === true) {\r\n                    // 将返回的token和用户名存储在浏览器sessionStorage中\r\n                    window.sessionStorage.setItem(\"token\", data.data.userinfo.token);\r\n                    window.sessionStorage.setItem(\"userName\", form.value.userName);\r\n                    // 跳转至首页\r\n                    router.replace(\"/home\");\r\n                    ElMessage.success(\"登录成功\");\r\n                } else {\r\n                    ElMessage.error(result.msg);\r\n                }\r\n            } catch (err) {\r\n                console.log(\"error:\"+err);\r\n                ElMessage.error(\"系统错误，请联系管理员\");\r\n            }\r\n        } else {\r\n            console.log(\"验证失败\")\r\n        }\r\n    });\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$bg: #2d3a4b;\r\n$dark_gray: #889aa4;\r\n$light_gray: #eee;\r\n$cursor: #fff;\r\n.login-container {\r\n    min-height: 100%;\r\n    width: 100%;\r\n    background-color: $bg;\r\n    overflow: hidden;\r\n    .login-form {\r\n        position: relative;\r\n        width: 520px;\r\n        max-width: 100%;\r\n        padding: 160px 35px 0;\r\n        margin: 0 auto;\r\n        overflow: hidden;\r\n        ::v-deep .el-form-item {\r\n            border: 1px solid rgba(255, 255, 255, 0.1);\r\n            background: rgba(0, 0, 0, 0.1);\r\n            border-radius: 5px;\r\n            color: #454545;\r\n        }\r\n        ::v-deep .el-form-item__content{\r\n            color: #454545;\r\n            background: rgba(0, 0, 0, 0.1);\r\n        }\r\n        ::v-deep .el-input__wrapper {\r\n            display: block;\r\n            color: #454545;\r\n            background: rgb(36,47,60);\r\n            box-shadow:none;\r\n            height: 95%;\r\n        }\r\n        ::v-deep .el-input {\r\n            display: inline-block;\r\n            background: rgb(36,47,60);\r\n            height: 47px;\r\n            width: 85%;\r\n            input {\r\n                background: transparent;\r\n                border: 0px;\r\n                -webkit-appearance: none;\r\n                border-radius: 0px;\r\n                padding: 12px 5px 12px 15px;\r\n                color: $light_gray;\r\n                height: 47px;\r\n                caret-color: $cursor;\r\n            }\r\n        }\r\n        .login-button {\r\n            width: 100%;\r\n            box-sizing: border-box;\r\n        }\r\n    }\r\n    .tips {\r\n        font-size: 16px;\r\n        line-height: 28px;\r\n        color: #fff;\r\n        margin-bottom: 10px;\r\n        span {\r\n            &:first-of-type {\r\n                margin-right: 16px;\r\n            }\r\n        }\r\n    }\r\n    .svg-container {\r\n        padding: 6px 5px 6px 15px;\r\n        color: $dark_gray;\r\n        vertical-align: middle;\r\n        display: inline-block;\r\n    }\r\n    .title-container {\r\n        position: relative;\r\n        .title {\r\n            font-size: 26px;\r\n            color: $light_gray;\r\n            margin: 0px auto 40px auto;\r\n            text-align: center;\r\n            font-weight: bold;\r\n        }\r\n        ::v-deep .lang-select {\r\n            position: absolute;\r\n            top: 4px;\r\n            right: 0;\r\n            background-color: white;\r\n            font-size: 22px;\r\n            padding: 4px;\r\n            border-radius: 4px;\r\n            cursor: pointer;\r\n        }\r\n    }\r\n    .show-pwd {\r\n        font-size: 16px;\r\n        color: $dark_gray;\r\n        cursor: pointer;\r\n        user-select: none;\r\n    }\r\n}\r\n</style>"],"mappings":";;;EACOA,KAAK,EAAC;AAAiB;gEAGpBC,mBAAA,CAEM;EAFDD,KAAK,EAAC;AAAiB,I,aACxBC,mBAAA,CAA0B;EAAtBD,KAAK,EAAC;AAAO,GAAC,KAAG,E;;;;;;;;uBAJjCE,mBAAA,CAkBM,OAlBNC,UAkBM,GAjBFC,YAAA,CAgBUC,kBAAA;IAhBDL,KAAK,EAAC,YAAY;IACjBM,KAAK,EAAEC,MAAA,CAAAC,IAAI;IAAGC,KAAK,EAAEF,MAAA,CAAAE,KAAK;IAAEC,GAAG,EAAC;;sBACtC,MAEM,CAFNC,UAEM,EACNP,YAAA,CAGeQ,uBAAA;MAHDC,IAAI,EAAC;IAAU;wBACzB,MAA2D,CAA3DT,YAAA,CAA2DU,kBAAA;QAAjDC,IAAI,EAAE,EAAE;QAAEf,KAAK,EAAC;;0BAAgB,MAAO,CAAPI,YAAA,CAAOG,MAAA,U;;UACjDH,YAAA,CAAwDY,mBAAA;oBAArCT,MAAA,CAAAC,IAAI,CAACS,QAAQ;mEAAbV,MAAA,CAAAC,IAAI,CAACS,QAAQ,GAAAC,MAAA;QAAEC,WAAW,EAAC;;;QAElDf,YAAA,CAGeQ,uBAAA;MAHDC,IAAI,EAAC;IAAU;wBACzB,MAA2D,CAA3DT,YAAA,CAA2DU,kBAAA;QAAjDC,IAAI,EAAE,EAAE;QAAEf,KAAK,EAAC;;0BAAgB,MAAO,CAAPI,YAAA,CAAOG,MAAA,U;;UACjDH,YAAA,CAAuEY,mBAAA;oBAApDT,MAAA,CAAAC,IAAI,CAACY,QAAQ;mEAAbb,MAAA,CAAAC,IAAI,CAACY,QAAQ,GAAAF,MAAA;QAAEG,IAAI,EAAC,UAAU;QAACF,WAAW,EAAC;;;QAElEf,YAAA,CAEeQ,uBAAA;wBADX,MAAkF,CAAlFR,YAAA,CAAkFkB,oBAAA;QAAvED,IAAI,EAAC,SAAS;QAACrB,KAAK,EAAC,cAAc;QAAEuB,OAAK,EAAEhB,MAAA,CAAAiB;;0BAAa,MAAE,C,iBAAF,IAAE,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}